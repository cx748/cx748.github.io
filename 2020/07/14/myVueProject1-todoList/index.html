<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>myVueProject1-todoList | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="项目介绍这个项目是利用vue框架开发的一个待办事项清单SPA(single-page application)网页。其中用到了vue的核心插件vue-router和Vuex, 并且用mock模拟后端的数据与ajax请求的接口。 项目分析项目需求 查询所有的待办事项，以及完成这些待办事项所需要的待办单项 新增，修改待办事项 删除，锁定待办事项 (锁定之后，待办事项的数据不能被改动) 新增，修改，删除">
<meta property="og:type" content="article">
<meta property="og:title" content="myVueProject1-todoList">
<meta property="og:url" content="http://yoursite.com/2020/07/14/myVueProject1-todoList/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="项目介绍这个项目是利用vue框架开发的一个待办事项清单SPA(single-page application)网页。其中用到了vue的核心插件vue-router和Vuex, 并且用mock模拟后端的数据与ajax请求的接口。 项目分析项目需求 查询所有的待办事项，以及完成这些待办事项所需要的待办单项 新增，修改待办事项 删除，锁定待办事项 (锁定之后，待办事项的数据不能被改动) 新增，修改，删除">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-07-14T07:27:27.953Z">
<meta property="article:modified_time" content="2020-07-14T03:38:27.748Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-myVueProject1-todoList" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/14/myVueProject1-todoList/" class="article-date">
  <time datetime="2020-07-14T07:27:27.953Z" itemprop="datePublished">2020-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      myVueProject1-todoList
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h1><p>这个项目是利用vue框架开发的一个待办事项清单SPA(single-page application)网页。其中用到了vue的核心插件vue-router和Vuex, 并且用mock模拟后端的数据与ajax请求的接口。</p>
<h1 id="项目分析"><a href="#项目分析" class="headerlink" title="项目分析"></a>项目分析</h1><h2 id="项目需求"><a href="#项目需求" class="headerlink" title="项目需求"></a>项目需求</h2><ol>
<li>查询所有的待办事项，以及完成这些待办事项所需要的待办单项</li>
<li>新增，修改待办事项</li>
<li>删除，锁定待办事项 (锁定之后，待办事项的数据不能被改动)</li>
<li>新增，修改，删除待办单项</li>
<li>显示为完成的待办单项的计数<h2 id="数据分析"><a href="#数据分析" class="headerlink" title="数据分析"></a>数据分析</h2>需要在页面显示的数据有</li>
</ol>
<ul>
<li>待办事项的标题</li>
<li>待办事项的待办单项的文字内容</li>
<li>未完成的待办单项数目<br>隐式数据有</li>
<li>待办事项的锁的图标</li>
<li>待办事项的删除图标</li>
<li>待办事项的id</li>
<li>待办单项的删除图标</li>
<li>待办单项的完成状态<h2 id="单个待办事项的数据结构"><a href="#单个待办事项的数据结构" class="headerlink" title="单个待办事项的数据结构"></a>单个待办事项的数据结构</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  id: String,</span><br><span class="line">  title: String,</span><br><span class="line">  count: Number,</span><br><span class="line">  idDelete: Boolean,</span><br><span class="line">  locked: Boolean,</span><br><span class="line">  record: [</span><br><span class="line">    text: String,</span><br><span class="line">    isDelete: Boolean,</span><br><span class="line">    checked: Boolean</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="api分析"><a href="#api分析" class="headerlink" title="api分析"></a>api分析</h2>用户主要有以下这些这些操作</li>
<li>首次进入页面，查看待办事项的列表</li>
<li>点击新增按钮，新增一个待办事项</li>
<li>点击一个待办事项，右边显示待办事项的详细内容</li>
<li>点击标题，修改待办事项的标题</li>
<li>点击删除图标，删除待办事项</li>
<li>点击锁定图标，锁定待办事项</li>
<li>点击加号图标，新增待办单项</li>
<li>点击待办单项内容，修改待办单项</li>
<li>点击待办单项旁的删除图片，删除待办单项</li>
<li>点击已完成按钮完成单项<h3 id="待办事项列表"><a href="#待办事项列表" class="headerlink" title="待办事项列表"></a>待办事项列表</h3>api: 接口名，params：传入的数据，data：返回的数据<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">api: &#x2F;todo&#x2F;list(get)</span><br><span class="line">params: &#123;&#125;</span><br><span class="line">&#x2F;*</span><br><span class="line">左边的列表肯定是一个数组对象，因为我们每次点击待办事项的标题，就会显示</span><br><span class="line">待办事项的详细内容，所以我们需要一个id来标识</span><br><span class="line">*&#x2F;</span><br><span class="line">data: [</span><br><span class="line">  &#123;</span><br><span class="line">    id: String,</span><br><span class="line">    title: String,</span><br><span class="line">    count: Number,</span><br><span class="line">    locked: Boolean</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="新增待办事项"><a href="#新增待办事项" class="headerlink" title="新增待办事项"></a>新增待办事项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">api: &#x2F;todo&#x2F;addTodo (post)</span><br><span class="line">params: &#123;&#125;</span><br><span class="line">data: &#123;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="单个待办事项查询"><a href="#单个待办事项查询" class="headerlink" title="单个待办事项查询"></a>单个待办事项查询</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">api: &#x2F;todo&#x2F;listId (get)</span><br><span class="line">params: &#123;id: xxx&#125; &#x2F;&#x2F;传入id，根据id返回待办事项的所有数据</span><br><span class="line">data：&#123;</span><br><span class="line">  id: String,</span><br><span class="line">  title: String,</span><br><span class="line">  count: Number,</span><br><span class="line">  isDelete: Boolean,</span><br><span class="line">  locked: Boolean,</span><br><span class="line">  record: [</span><br><span class="line">    text: String,</span><br><span class="line">    isDelete: Boolean,</span><br><span class="line">    checked: Boolean</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="修改待办事项标题，删除，锁定待办事项"><a href="#修改待办事项标题，删除，锁定待办事项" class="headerlink" title="修改待办事项标题，删除，锁定待办事项"></a>修改待办事项标题，删除，锁定待办事项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">api: &#x2F;todo&#x2F;editTodo (post)</span><br><span class="line">&#x2F;*</span><br><span class="line">这里的是哪个操作都是修改的同一条待办事项，所以可以把这些合并在同一个接口</span><br><span class="line">*&#x2F;</span><br><span class="line">params: &#123;</span><br><span class="line">  id: String,</span><br><span class="line">  title: String,</span><br><span class="line">  isDelete: Boolean,</span><br><span class="line">  locked: Boolean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data: &#123;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="新增待办单项"><a href="#新增待办单项" class="headerlink" title="新增待办单项"></a>新增待办单项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">api: &#x2F;todo&#x2F;addRecord (post)</span><br><span class="line">params: &#123;&#125;</span><br><span class="line">data: &#123;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="修改、删除、完成待办单项"><a href="#修改、删除、完成待办单项" class="headerlink" title="修改、删除、完成待办单项"></a>修改、删除、完成待办单项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">api: &#x2F;todo&#x2F;editRecord (post)</span><br><span class="line">params: &#123;</span><br><span class="line">  text: String,</span><br><span class="line">  isDelete: Boolean,</span><br><span class="line">  checked: Boolean</span><br><span class="line">&#125;</span><br><span class="line">data: &#123;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="组件分析"><a href="#组件分析" class="headerlink" title="组件分析"></a>组件分析</h2></li>
<li>SPA引用本身是一个大组件</li>
<li>里面的布局是一个组件，它里面包含了其他组件</li>
<li>左边的待办事项列表是一个组件，包含列表与新增</li>
<li>右边的单个待办事项算一个组件，它包含上半部分与下半部分</li>
<li>待办单项是一个组件，他要被循环渲染多次<br>所以最终可以得到：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.vue &#x2F;&#x2F; 最外层根组件</span><br><span class="line">layouts.vue &#x2F;&#x2F; 布局组件，接入其他组件</span><br><span class="line">menus.vue &#x2F;&#x2F; 左边待办事项列表组件</span><br><span class="line">todos.vue &#x2F;&#x2F; 右边待办事项的内容</span><br><span class="line">item.vue &#x2F;&#x2F; 事项的待办单项组件</span><br></pre></td></tr></table></figure>
<h1 id="mock模拟数据与接口"><a href="#mock模拟数据与接口" class="headerlink" title="mock模拟数据与接口"></a>mock模拟数据与接口</h1><h2 id="安装mock、axios依赖"><a href="#安装mock、axios依赖" class="headerlink" title="安装mock、axios依赖"></a>安装mock、axios依赖</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install mockjs</span><br><span class="line">npm install axios</span><br><span class="line">npm install axios-mock-adapter --save-dev &#x2F;&#x2F; 这是axios与mock的配置器，把二者结合起来</span><br></pre></td></tr></table></figure>
<h2 id="创建mock"><a href="#创建mock" class="headerlink" title="创建mock"></a>创建mock</h2><h3 id="新建src-mock-data-todoList-js"><a href="#新建src-mock-data-todoList-js" class="headerlink" title="新建src/mock/data/todoList.js"></a>新建src/mock/data/todoList.js</h3>todoList.js文件是初始化我们需要的数据，再进行导出<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Mock <span class="keyword">from</span> <span class="string">'mockjs'</span></span><br><span class="line"><span class="keyword">let</span> Todos = []</span><br><span class="line"><span class="keyword">const</span> COUNT = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i =<span class="number">1</span>; i &lt;= COUNT.length; i ++)&#123;</span><br><span class="line">  Todos.push(Mock.mock(&#123;</span><br><span class="line">    id: Mock.Random.guid(),</span><br><span class="line">    title: Mock.Random.first(),</span><br><span class="line">    isDelete: <span class="literal">false</span>,</span><br><span class="line">    locked: Mock.Random.boolean(),</span><br><span class="line">    record: COUNT.map(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        text: Mock.Random.cparagraph(<span class="number">2</span>),</span><br><span class="line">        idDelete: <span class="literal">false</span>,</span><br><span class="line">        checked: Mock.Random.boolean()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123; <span class="comment">//导出列表数据</span></span><br><span class="line">  Todos</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="新建src-mock-mock-js"><a href="#新建src-mock-mock-js" class="headerlink" title="新建src/mock/mock.js"></a>新建src/mock/mock.js</h3>核心代码，作用是模拟ajax请求，生成并返回模拟数据<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> MockAdapter <span class="keyword">from</span> <span class="string">'axios-mock-adapter'</span> <span class="comment">// axios与mock的配置</span></span><br><span class="line"><span class="keyword">import</span> Mock <span class="keyword">from</span> <span class="string">'mockjs'</span></span><br><span class="line"><span class="keyword">import</span> &#123;Todos&#125; <span class="keyword">from</span> <span class="string">'./data/todoList'</span> <span class="comment">// 导入Todos数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  start () &#123; <span class="comment">// 初始化函数</span></span><br><span class="line">    <span class="keyword">let</span> mock = <span class="keyword">new</span> MockAdapter(axios); <span class="comment">// 创建MockAdapter实例</span></span><br><span class="line">    <span class="comment">// 获取todo列表</span></span><br><span class="line">    mock.onGet(<span class="string">'/todo/list'</span>).reply(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> mockTodo = Todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> &#123; <span class="comment">// 从todoList中获取左边列表所需要的的数据，并赋值给mockTodo</span></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          id: todo.id,</span><br><span class="line">          title: todo.title,</span><br><span class="line">          count: todo.record.filter(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (data.checked === <span class="literal">false</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">          &#125;).length, <span class="comment">// 过滤record里面checked为true的数据</span></span><br><span class="line">          locked: todo.locked,</span><br><span class="line">          isDelete: todo.isDelete</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).filter(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (todo.isdelete === <span class="literal">true</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">      &#125;) <span class="comment">// 过滤掉isDelete为true的todo，因为已经被删除了</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          resolve([<span class="number">200</span>, &#123;<span class="attr">todos</span>: mockTodo&#125;]) <span class="comment">//返回状态为200，并且返回todos数据</span></span><br><span class="line">        &#125;, <span class="number">200</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增一条todo</span></span><br><span class="line">    mock.onPost(<span class="string">'/todo/addTodo'</span>).reply(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">      Todos.push(&#123;</span><br><span class="line">        id: Mock.Random.guid(),</span><br><span class="line">        title: <span class="string">'newList'</span>,</span><br><span class="line">        isDelete: <span class="literal">false</span>,</span><br><span class="line">        locked: <span class="literal">false</span>,</span><br><span class="line">        record: []</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          resolve([<span class="number">200</span>])</span><br><span class="line">        &#125;, <span class="number">200</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取待办事项todo的详细信息,即页面应用的右上部分</span></span><br><span class="line">    mock.onGet(<span class="string">'/todo/listId'</span>).reply(<span class="function"><span class="params">config</span> =&gt;</span> &#123; <span class="comment">// 有参get请求</span></span><br><span class="line">      <span class="keyword">let</span> &#123;id&#125; = config.params <span class="comment">// 根据传入的参数，确定id</span></span><br><span class="line">      <span class="comment">// 然后根据id和现有的Todos匹配，找出id相等的数据，再进行返回</span></span><br><span class="line">      <span class="keyword">let</span> todo = Todos.find(<span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id &amp;&amp; todo.id === id</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// todo.count(等待完成数目)等于todo.record的没被勾选的单项的数目</span></span><br><span class="line">      todo.count = todo.record.filter(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data.checked === <span class="literal">false</span></span><br><span class="line">      &#125;).length</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          resovle([<span class="number">200</span>, &#123;<span class="attr">todo</span>: todo&#125;]) <span class="comment">//返回状态码200和todo数据</span></span><br><span class="line">        &#125;, <span class="number">200</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增一条待办事项的待办单项</span></span><br><span class="line">    mock.onPost(<span class="string">'/todo/addRecord'</span>).reply(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// id是传进来的值唯一待办事项的id。text是用户新增输入的文本数据</span></span><br><span class="line">      <span class="keyword">let</span> &#123;id, text&#125; = <span class="built_in">JSON</span>.parse(config.data) <span class="comment">// JSON.parse将字符串转换成对象</span></span><br><span class="line">      Todos.some(<span class="function">(<span class="params">t, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (t.id === id) &#123;</span><br><span class="line">          t.record.push(&#123;</span><br><span class="line">            text: text,</span><br><span class="line">            isDelete: <span class="literal">false</span>,</span><br><span class="line">            checked: <span class="literal">false</span></span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          resolve([<span class="number">200</span>])</span><br><span class="line">        &#125;, <span class="number">200</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改待办事项的标题</span></span><br><span class="line">    mock.onPost(<span class="string">'/todo/editTodo'</span>).reply(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> &#123;todo&#125; = <span class="built_in">JSON</span>.parse(config.data)</span><br><span class="line">      Todos.some(<span class="function">(<span class="params">t,index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (t.id === todo.id) &#123;</span><br><span class="line">          t.title = todo.title</span><br><span class="line">          t.locked = todo.locked</span><br><span class="line">          t.idDelete = todo.isDelete</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          resolve([<span class="number">200</span>])</span><br><span class="line">        &#125;, <span class="number">200</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//修改待办单项的标题</span></span><br><span class="line">    mock.onPost(<span class="string">'/todo/editRecord'</span>).reply(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> &#123;id, record, index&#125; = <span class="built_in">JSON</span>.parse(config.data)</span><br><span class="line">      Todos.some(<span class="function">(<span class="params">t</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (t.id === id) &#123;</span><br><span class="line">          t.record[index] = record</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          resolve([<span class="number">200</span>])</span><br><span class="line">        &#125;, <span class="number">200</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="导出mock"><a href="#导出mock" class="headerlink" title="导出mock"></a>导出mock</h2>新建src/mock/index.js，方便其他文件引入接口api函数<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mock <span class="keyword">from</span> <span class="string">'./mock'</span>; </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> mock; <span class="comment">// 导入同级下mock.js的内容，并且导出</span></span><br></pre></td></tr></table></figure>
<h2 id="封装api函数，新建src-api-api-js"><a href="#封装api函数，新建src-api-api-js" class="headerlink" title="封装api函数，新建src/api/api.js"></a>封装api函数，新建src/api/api.js</h2>把我们需要调用的接口写到同一个文件里面，封装成一个一个的函数，需要使用时直接调用这个函数<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getTodoList = <span class="function"><span class="params">params</span> =&gt;</span> &#123; <span class="comment">// 封装一个函数，名为getTodoList</span></span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">`/todo/list`</span>, &#123;<span class="attr">params</span>: params&#125;) <span class="comment">// 请求的路径是'/todo/list'，成功会返回待办事项列表数据</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addTodo = <span class="function"><span class="params">params</span> =&gt;</span> &#123; <span class="comment">// 封装一个函数，名为addTodo</span></span><br><span class="line">  <span class="keyword">return</span> axios.post(<span class="string">`/todo/addTodo`</span>, params).then(<span class="function"><span class="params">res</span> =&gt;</span> res.data) <span class="comment">// 请求的路径是'/todo/addTodo'，成功会新增加一条title为newList的待办事项，并且返回状态码200</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getTodo = <span class="function"><span class="params">params</span> =&gt;</span> &#123; <span class="comment">// 封装一个函数，名为getTodo</span></span><br><span class="line">  <span class="keyword">return</span> anxios.get(<span class="string">`/todo/listId`</span>, &#123;<span class="attr">params</span>: params&#125;) <span class="comment">// 请求的路径是'/todo/listId'，成功会返回id下的待办事项的数据详情</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addRecord = <span class="function"><span class="params">params</span> =&gt;</span> &#123; <span class="comment">//封装一个函数，名为addRecord</span></span><br><span class="line">  <span class="keyword">return</span> anxios.post(<span class="string">`/todo/addRecord`</span>, params).then(<span class="function"><span class="params">res</span> =&gt;</span> res.data) <span class="comment">// 请求的路径是'/todo/addRecord'，成功会返回id下的待办事项的数据详情</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> editTodo = <span class="function"><span class="params">params</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.post(<span class="string">`/todo/editTodo`</span>, params).then(<span class="function"><span class="params">res</span> =&gt;</span> res.data) <span class="comment">// 请求的路径是'/todo/listId'，成功会返回id下的待办事项的数据详情</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> editRecord = <span class="function"><span class="params">params</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.post(<span class="string">`/todo/editRecord`</span>, params).then(<span class="function"><span class="params">res</span> =&gt;</span> res.data) <span class="comment">// 请求的路径是'/todo/listId'，成功会返回id下的待办事项的数据详情</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<code>至此，我们已经完成了数据与接口的模拟，接下来我们开始着手用VUE全家桶来调用这些数据和接口，来完成我们的单页SPA项目</code></li>
</ul>
<h1 id="项目布局与组件"><a href="#项目布局与组件" class="headerlink" title="项目布局与组件"></a>项目布局与组件</h1><h2 id="在-src-main-js文件里创建单页应用的根实例"><a href="#在-src-main-js文件里创建单页应用的根实例" class="headerlink" title="在/src/main.js文件里创建单页应用的根实例"></a>在/src/main.js文件里创建单页应用的根实例</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"><span class="keyword">import</span> Mock <span class="keyword">from</span> <span class="string">'./mock'</span></span><br><span class="line">Mock.start() <span class="comment">// 生成模拟数据与ajax请求的接口</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123; <span class="comment">// 创建一个Vue的根实例</span></span><br><span class="line">  el: <span class="string">'#app'</span>, <span class="comment">// 挂载id，这个实例下的所有内容都会在index.html的一个id为app的div下显示</span></span><br><span class="line">  router, <span class="comment">// 注入路由配置</span></span><br><span class="line">  components: &#123; App &#125;, <span class="comment">// 配置根模板</span></span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span> <span class="comment">// 注入组件</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="新建layouts-vue-布局组件"><a href="#新建layouts-vue-布局组件" class="headerlink" title="新建layouts.vue(布局组件)"></a>新建layouts.vue(布局组件)</h2><p>在 src/components/目录下新建一个文件 layouts.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;section class&#x3D;&quot;container&quot; &gt; &lt;!--最外层容器--&gt;</span><br><span class="line">    &lt;section class&#x3D;&quot;menu&quot;&gt; &lt;!--左边的容器--&gt;</span><br><span class="line">    &lt;&#x2F;section&gt;</span><br><span class="line">    &lt;section class&#x3D;&quot;content-container&quot;&gt;&lt;!--右边的容器--&gt;</span><br><span class="line">    &lt;&#x2F;section&gt;</span><br><span class="line">  &lt;&#x2F;section&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export  default &#123;&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot;&gt;</span><br><span class="line">@import &#39;..&#x2F;common&#x2F;style&#x2F;layouts.less&#39;;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<p>忘了提醒，样式是用less写的，我们需要先下载好less和webpack的loader:<br>在终端输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev less-loader style-loader less</span><br></pre></td></tr></table></figure>
<p>在webpack的配置文件 /build/webpack.base.conf.js 加上</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;   <span class="comment">//把这个对象添加在里面</span></span><br><span class="line">        test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="string">'style-loader'</span>,</span><br><span class="line">          &#123; <span class="attr">loader</span>: <span class="string">'css-loader'</span>, <span class="attr">options</span>: &#123; <span class="attr">importLoaders</span>: <span class="number">1</span> &#125; &#125;,</span><br><span class="line">          <span class="string">'less-loader'</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="menus-vue-菜单组件"><a href="#menus-vue-菜单组件" class="headerlink" title="menus.vue(菜单组件)"></a>menus.vue(菜单组件)</h2><p>在src/components/目录下新建一个menus.vue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;list-todos&quot;&gt;  &lt;!--菜单容器--&gt;</span><br><span class="line">      &lt;a v-for&#x3D;&quot;(item, index) in items&quot; :key&#x3D;&quot;index&quot;  class&#x3D;&quot;list-todo activeListClass list&quot; &gt; &lt;!--单个菜单容器--&gt;</span><br><span class="line">        &lt;span v-if&#x3D;&quot;item.locked&quot; class&#x3D;&quot;icon-lock&quot; &gt;&lt;&#x2F;span&gt;  &lt;!--锁的图标--&gt;</span><br><span class="line">        &lt;span v-if&#x3D;&quot;item.count&quot; class&#x3D;&quot;count-list&quot;&gt;&#123;&#123;item.count&#125;&#125;&lt;&#x2F;span&gt;&lt;!--数字--&gt;</span><br><span class="line">        &#123;&#123;item.title&#125;&#125;</span><br><span class="line">      &lt;&#x2F;a&gt;</span><br><span class="line">    &lt;a class&#x3D;&quot; link-list-new&quot; &gt; &lt;!--新增菜单--&gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;icon-plus&quot;&gt;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">      新增</span><br><span class="line">    &lt;&#x2F;a&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data () &#123; &#x2F;&#x2F; data函数</span><br><span class="line">    return &#123;</span><br><span class="line">      items: [&#123; title: &#39;星期一&#39;, count: 1, locked: true &#125;, &#x2F;&#x2F; 菜单的模拟数据</span><br><span class="line">        &#123; title: &#39;星期二&#39;, count: 2, locked: true &#125;,</span><br><span class="line">        &#123; title: &#39;星期三&#39;, count: 3, locked: false &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot;&gt;</span><br><span class="line">@import &#39;..&#x2F;common&#x2F;style&#x2F;menu.less&#39;;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="新建todo-vue-待办事项详情组件"><a href="#新建todo-vue-待办事项详情组件" class="headerlink" title="新建todo.vue(待办事项详情组件)"></a>新建todo.vue(待办事项详情组件)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;page lists-show&quot;&gt;&lt;!--最外层容器--&gt;</span><br><span class="line">    &lt;nav&gt;&lt;!--容器上半部分--&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;nav-group&quot;&gt; &lt;!--移动端的菜单图标--&gt;</span><br><span class="line">        &lt;a class&#x3D;&quot;nav-item&quot;&gt;</span><br><span class="line">          &lt;span class&#x3D;&quot;icon-list-unordered&quot;&gt;</span><br><span class="line">          &lt;&#x2F;span&gt;</span><br><span class="line">        &lt;&#x2F;a&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;h1 class&#x3D;&quot;title-page&quot;&gt;</span><br><span class="line">        &lt;span class&#x3D;&quot;title-wrapper&quot;&gt;&#123;&#123;todo.title&#125;&#125;&lt;&#x2F;span&gt; &lt;!-- 标题--&gt;</span><br><span class="line">        &lt;span class&#x3D;&quot;count-list&quot;&gt;&#123;&#123;todo.count&#125;&#125;&lt;&#x2F;span&gt;&lt;!-- 数目--&gt;</span><br><span class="line">      &lt;&#x2F;h1&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;nav-group right&quot;&gt;&lt;!-- 右边的删除，锁定图标容器--&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;options-web&quot;&gt;</span><br><span class="line">          &lt;a class&#x3D;&quot; nav-item&quot;&gt; &lt;!-- 锁定图标--&gt;</span><br><span class="line">            &lt;span class&#x3D;&quot;icon-lock&quot; v-if&#x3D;&quot;todo.locked&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">            &lt;span class&#x3D;&quot;icon-unlock&quot; v-else&gt;</span><br><span class="line">            &lt;&#x2F;span&gt;</span><br><span class="line">          &lt;&#x2F;a&gt;</span><br><span class="line">          &lt;a class&#x3D;&quot; nav-item&quot;&gt;&lt;!-- 删除图标--&gt;</span><br><span class="line">            &lt;span class&#x3D;&quot;icon-trash&quot;&gt;</span><br><span class="line">            &lt;&#x2F;span&gt;</span><br><span class="line">          &lt;&#x2F;a&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot; form todo-new input-symbol&quot;&gt; &lt;!-- 新增单个代办单项输入框,监听了回车事件，双向绑定text值,监听了disabled属性，在todo.locked为true的情况下无法编辑--&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;text&quot; placeholder&#x3D;&#39;请输入&#39; @keyup.enter&#x3D;&quot;onAdd&quot; :disabled&#x3D;&quot;todo.locked&quot; &#x2F;&gt;</span><br><span class="line">        &lt;span class&#x3D;&quot;icon-add&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;nav&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;content-scrollable list-items&quot;&gt;</span><br><span class="line">      &lt;!--容器下半部分--&gt;</span><br><span class="line">      &lt;div v-for&#x3D;&quot;(item, index) in items&quot; :key&#x3D;&quot;index&quot;&gt;</span><br><span class="line">        &lt;item :item&#x3D;&quot;item&quot;&#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import item from &#39;.&#x2F;item&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      todo: &#123; &#x2F;&#x2F; 详情内容</span><br><span class="line">        title: &#39;星期一&#39;,</span><br><span class="line">        count: 12,</span><br><span class="line">        locked: false</span><br><span class="line">      &#125;,</span><br><span class="line">      items: [ &#x2F;&#x2F; 代办单项列表</span><br><span class="line">        &#123; checked: false, text: &#39;新的一天&#39;, isDelete: false &#125;,</span><br><span class="line">        &#123; checked: false, text: &#39;新的一天&#39;, isDelete: false &#125;,</span><br><span class="line">        &#123; checked: true, text: &#39;新的一天&#39;, isDelete: false &#125;</span><br><span class="line">      ],</span><br><span class="line">      text: &#39;&#39; &#x2F;&#x2F; 新增代办单项绑定的值</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    item</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    onAdd () &#123;</span><br><span class="line">      this.items.push(&#123;</span><br><span class="line">        checked: false, text: this.text, isDelete: false</span><br><span class="line">      &#125;) &#x2F;&#x2F; 当用户点击回车时候 ，给items的值新增一个对象，this.text 即输入框绑定的值</span><br><span class="line">      this.text &#x3D; &#39;&#39; &#x2F;&#x2F; 初始化输入框的值。</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang &#x3D; &quot;less&quot;&gt;</span><br><span class="line">@import &#39;..&#x2F;common&#x2F;style&#x2F;nav.less&#39;;</span><br><span class="line">@import &#39;..&#x2F;common&#x2F;style&#x2F;form.less&#39;;</span><br><span class="line">@import &#39;..&#x2F;common&#x2F;style&#x2F;todo.less&#39;;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="item-vue-单个待办单项组件"><a href="#item-vue-单个待办单项组件" class="headerlink" title="item.vue(单个待办单项组件)"></a>item.vue(单个待办单项组件)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;list-item editingClass editing&quot;&gt; &lt;!-- 最外层容器--&gt;</span><br><span class="line">    &lt;label class&#x3D;&quot;checkbox&quot;&gt; &lt;!--自定义的多选框--&gt;</span><br><span class="line">      &lt;input type&#x3D;&quot;checkbox&quot; v-model&#x3D;&quot;item.checked&quot;&gt; &lt;!--item.checked--&gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;checkbox-custom&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;label&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;item.text&quot;&gt;  &lt;!--绑定item.text--&gt;</span><br><span class="line">    &lt;a class&#x3D;&quot;delete-item&quot;&gt; &lt;!--删除图标--&gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;icon-trash&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;a&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: [&#39;item&#39;] &#x2F;&#x2F; 子组件显式的用 props 选项声明它期待获得的数据</span><br><span class="line">  &#x2F;&#x2F; 这里申明 它想要一个叫做 ’item‘的数据。</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot;&gt;</span><br><span class="line">@import &#39;..&#x2F;common&#x2F;style&#x2F;list-items.less&#39;;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="更新layouts组件"><a href="#更新layouts组件" class="headerlink" title="更新layouts组件"></a>更新layouts组件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;section class&#x3D;&quot;container&quot; &gt; &lt;!--最外层容器--&gt;</span><br><span class="line">    &lt;section class&#x3D;&quot;menu&quot;&gt; &lt;!--左边的容器--&gt;</span><br><span class="line">      &lt;menus&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;section&gt;</span><br><span class="line">    &lt;section class&#x3D;&quot;content-container&quot;&gt;&lt;!--右边的容器--&gt;</span><br><span class="line">      &lt;todo &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;section&gt;</span><br><span class="line">  &lt;&#x2F;section&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import menus from &#39;.&#x2F;menus&#39;</span><br><span class="line">import todo from &#39;.&#x2F;todo&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    menus,</span><br><span class="line">    todo</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot;&gt;</span><br><span class="line">@import &#39;..&#x2F;common&#x2F;style&#x2F;layouts.less&#39;;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<p><code>此时，我们已经通过VUE与vue-router完成了静态页面的开发。接下来我们要从接口获取数据，并且用vuex集中管理这些数据</code></p>
<h1 id="将之前的静态数据换成我们之前设计的接口"><a href="#将之前的静态数据换成我们之前设计的接口" class="headerlink" title="将之前的静态数据换成我们之前设计的接口"></a>将之前的静态数据换成我们之前设计的接口</h1><h2 id="更改menu-vue"><a href="#更改menu-vue" class="headerlink" title="更改menu.vue"></a>更改menu.vue</h2><p>我们首先更改menu.vue的代码，将我们之前手动设置的items数组列表设置为从后台接口获取待办事项列表数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;list-todos&quot;&gt;  &lt;!--菜单容器--&gt;</span><br><span class="line">      &lt;a @click&#x3D;&quot;goList(item.id)&quot; v-for&#x3D;&quot;(item, index) in items&quot; :key&#x3D;&quot;index&quot;  class&#x3D;&quot;list-todo activeListClass list&quot; &gt; &lt;!--单个菜单容器--&gt;</span><br><span class="line">        &lt;span v-if&#x3D;&quot;item.locked&quot; class&#x3D;&quot;icon-lock&quot; &gt;&lt;&#x2F;span&gt;  &lt;!--锁的图标--&gt;</span><br><span class="line">        &lt;span v-if&#x3D;&quot;item.count&quot; class&#x3D;&quot;count-list&quot;&gt;&#123;&#123;item.count&#125;&#125;&lt;&#x2F;span&gt;&lt;!--数字--&gt;</span><br><span class="line">        &#123;&#123;item.title&#125;&#125;</span><br><span class="line">      &lt;&#x2F;a&gt;</span><br><span class="line">    &lt;a @click&#x3D;&quot;addTodoList&quot; class&#x3D;&quot; link-list-new&quot; &gt; &lt;!--新增菜单--&gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;icon-plus&quot;&gt;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">      新增</span><br><span class="line">    &lt;&#x2F;a&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;getTodoList, addTodo&#125; from &#39;..&#x2F;api&#x2F;api&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  data () &#123; &#x2F;&#x2F; data函数</span><br><span class="line">    &#x2F;&#x2F; return &#123;</span><br><span class="line">    &#x2F;&#x2F;   items: [&#123; title: &#39;星期一&#39;, count: 1, locked: true &#125;, &#x2F;&#x2F; 菜单的模拟数据</span><br><span class="line">    &#x2F;&#x2F;     &#123; title: &#39;星期二&#39;, count: 2, locked: true &#125;,</span><br><span class="line">    &#x2F;&#x2F;     &#123; title: &#39;星期三&#39;, count: 3, locked: false &#125;</span><br><span class="line">    &#x2F;&#x2F;   ]</span><br><span class="line">    &#x2F;&#x2F; &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      items: [], &#x2F;&#x2F; 待办事项列表数组数据</span><br><span class="line">      todoId: &#39;&#39; &#x2F;&#x2F; 默认选中id</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123; &#x2F;&#x2F; 监听todoId的值，todoId发生改变之后切换子路由</span><br><span class="line">    &#39;todoId&#39; (id) &#123;</span><br><span class="line">      this.$router.push(&#123;name: &#39;todo&#39;, params: &#123;id: id&#125; &#125;) &#x2F;&#x2F; 更换当前的子路由</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, </span><br><span class="line">  created () &#123; &#x2F;&#x2F; 在实例创建完成后，我们立即向模拟的后台请求数据</span><br><span class="line">    getTodoList(&#123;&#125;).then(res &#x3D;&gt; &#123;</span><br><span class="line">      console.log(res)</span><br><span class="line">      const TODOS &#x3D; res.data.todos &#x2F;&#x2F; 把返回数据的todos对象赋给TODOS</span><br><span class="line">      this.items &#x3D; TODOS &#x2F;&#x2F; 把从接口获得的待办事项列表数据赋给this.items</span><br><span class="line">      this.todoId &#x3D; TODOS[0].id &#x2F;&#x2F; 默认选中待办事项列表的第一项待办事项</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    goList (id) &#123; &#x2F;&#x2F; 点击待办事项时，替换选中的id</span><br><span class="line">      this.todoId &#x3D; id</span><br><span class="line">    &#125;,</span><br><span class="line">    addTodoList () &#123; &#x2F;&#x2F; 点击增加按钮，调用新增菜单的接口，在接口调用成功后请求数据</span><br><span class="line">      addTodo(&#123;&#125;).then(() &#x3D;&gt; &#123; &#x2F;&#x2F; 接口调用成功后会更新后台里的待办事项数据</span><br><span class="line">        &#x2F;&#x2F; console.log(data)</span><br><span class="line">        getTodoList(&#123;&#125;).then(res &#x3D;&gt; &#123; &#x2F;&#x2F; 请求更新后的待办事项数据</span><br><span class="line">          console.log(res)</span><br><span class="line">          const TODOS &#x3D; res.data.todos</span><br><span class="line">          this.items &#x3D; TODOS</span><br><span class="line">          this.todoId &#x3D; TODOS[TODOS.length - 1].id</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot;&gt;</span><br><span class="line">@import &#39;..&#x2F;common&#x2F;style&#x2F;menu.less&#39;;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="更新todo-vue"><a href="#更新todo-vue" class="headerlink" title="更新todo.vue"></a>更新todo.vue</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;page lists-show&quot;&gt;&lt;!--最外层容器--&gt;</span><br><span class="line">    &lt;nav&gt;&lt;!--容器上半部分--&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;nav-group&quot;&gt; &lt;!--移动端的菜单图标--&gt;</span><br><span class="line">        &lt;a class&#x3D;&quot;nav-item&quot;&gt;</span><br><span class="line">          &lt;span class&#x3D;&quot;icon-list-unordered&quot;&gt;</span><br><span class="line">          &lt;&#x2F;span&gt;</span><br><span class="line">        &lt;&#x2F;a&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;h1 class&#x3D;&quot;title-page&quot;&gt;</span><br><span class="line">        &lt;span class&#x3D;&quot;title-wrapper&quot;&gt;&#123;&#123;todo.title&#125;&#125;&lt;&#x2F;span&gt; &lt;!-- 标题--&gt;</span><br><span class="line">        &lt;span class&#x3D;&quot;count-list&quot;&gt;&#123;&#123;todo.count&#125;&#125;&lt;&#x2F;span&gt;&lt;!-- 数目--&gt;</span><br><span class="line">      &lt;&#x2F;h1&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot;nav-group right&quot;&gt;&lt;!-- 右边的删除，锁定图标容器--&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;options-web&quot;&gt;</span><br><span class="line">          &lt;a class&#x3D;&quot; nav-item&quot;&gt; &lt;!-- 锁定图标--&gt;</span><br><span class="line">            &lt;span class&#x3D;&quot;icon-lock&quot; v-if&#x3D;&quot;todo.locked&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">            &lt;span class&#x3D;&quot;icon-unlock&quot; v-else&gt;</span><br><span class="line">            &lt;&#x2F;span&gt;</span><br><span class="line">          &lt;&#x2F;a&gt;</span><br><span class="line">          &lt;a class&#x3D;&quot; nav-item&quot;&gt;&lt;!-- 删除图标--&gt;</span><br><span class="line">            &lt;span class&#x3D;&quot;icon-trash&quot;&gt;</span><br><span class="line">            &lt;&#x2F;span&gt;</span><br><span class="line">          &lt;&#x2F;a&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;div class&#x3D;&quot; form todo-new input-symbol&quot;&gt; &lt;!-- 新增单个代办单项输入框,监听了回车事件，双向绑定text值,监听了disabled属性，在todo.locked为true的情况下无法编辑--&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;text&quot; placeholder&#x3D;&#39;请输入&#39; @keyup.enter&#x3D;&quot;onAdd&quot; :disabled&#x3D;&quot;todo.locked&quot; &#x2F;&gt;</span><br><span class="line">        &lt;span class&#x3D;&quot;icon-add&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;nav&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;content-scrollable list-items&quot;&gt;</span><br><span class="line">      &lt;!--容器下半部分--&gt;</span><br><span class="line">      &lt;div v-for&#x3D;&quot;(item, index) in items&quot; :key&#x3D;&quot;index&quot;&gt;</span><br><span class="line">        &lt;!-- 向子组件item传递数据items待办事项的代办单项 --&gt;</span><br><span class="line">        &lt;item :item&#x3D;&quot;item&quot; :index&#x3D;&quot;index&quot; :id&#x3D;&quot;todo.id&quot; :init&#x3D;&quot;init&quot; :locked&#x3D;&quot;todo.locked&quot;&gt;&lt;&#x2F;item&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import item from &#39;.&#x2F;item&#39;</span><br><span class="line">import &#123; getTodo &#125; from &#39;..&#x2F;api&#x2F;api&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      todo: &#123; &#x2F;&#x2F; 详情内容</span><br><span class="line">        title: &#39;帕吉的小肚腩&#39;,</span><br><span class="line">        count: 24,</span><br><span class="line">        locked: false</span><br><span class="line">      &#125;,</span><br><span class="line">      items: [ &#x2F;&#x2F; 代办单项列表</span><br><span class="line">      ],</span><br><span class="line">      text: &#39;&#39; &#x2F;&#x2F; 新增代办单项绑定的值</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    item</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    &#39;$route.params.id&#39; () &#123;</span><br><span class="line">      this.init()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">    this.init()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    onAdd () &#123;</span><br><span class="line">      this.items.push(&#123;</span><br><span class="line">        checked: false, text: this.text, isDelete: false</span><br><span class="line">      &#125;) &#x2F;&#x2F; 当用户点击回车时候 ，给items的值新增一个对象，this.text 即输入框绑定的值</span><br><span class="line">      this.text &#x3D; &#39;&#39; &#x2F;&#x2F; 初始化输入框的值。</span><br><span class="line">    &#125;,</span><br><span class="line">    init () &#123;</span><br><span class="line">      &#x2F;&#x2F; 获取到$route.params下的id，当前所在路由的id，即我们在menus.vue组件处传入的数据</span><br><span class="line">      console.log(this.$route)</span><br><span class="line">      const ID &#x3D; this.$route.params.id</span><br><span class="line">      getTodo(&#123; id: ID &#125;).then(res &#x3D;&gt; &#123;</span><br><span class="line">        &#x2F;&#x2F; 根据当前所在待办事项的id获得待办事项详情</span><br><span class="line">        console.log(res)</span><br><span class="line">        let &#123;id, title, count, isDelete, locked, record&#125; &#x3D; res.data.todo</span><br><span class="line">        &#x2F;&#x2F; 请求成功，将record赋值给待办单项列表this.items</span><br><span class="line">        this.items &#x3D; record</span><br><span class="line">        &#x2F;&#x2F; 请求成功，将待办事项列表的详情数据赋给todo</span><br><span class="line">        this.todo &#x3D; &#123;</span><br><span class="line">          id: id,</span><br><span class="line">          title: title,</span><br><span class="line">          count: count,</span><br><span class="line">          isDelete: isDelete,</span><br><span class="line">          locked: locked</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang &#x3D; &quot;less&quot;&gt;</span><br><span class="line">@import &#39;..&#x2F;common&#x2F;style&#x2F;nav.less&#39;;</span><br><span class="line">@import &#39;..&#x2F;common&#x2F;style&#x2F;form.less&#39;;</span><br><span class="line">@import &#39;..&#x2F;common&#x2F;style&#x2F;todo.less&#39;;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="修改路由"><a href="#修改路由" class="headerlink" title="修改路由"></a>修改路由</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">...</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [&#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    name: <span class="string">'Layouts'</span>,</span><br><span class="line">    component: Layouts,</span><br><span class="line">    children: [&#123;</span><br><span class="line">      path: <span class="string">'/todo/:id'</span>,</span><br><span class="line">      name: <span class="string">'todo'</span>,</span><br><span class="line">      component: todo</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="更新item-vue"><a href="#更新item-vue" class="headerlink" title="更新item.vue"></a>更新item.vue</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;list-item editingClass editing&quot;&gt; &lt;!-- 最外层容器--&gt;</span><br><span class="line">    &lt;label class&#x3D;&quot;checkbox&quot;&gt; &lt;!--自定义的多选框--&gt;</span><br><span class="line">      &lt;input type&#x3D;&quot;checkbox&quot; v-model&#x3D;&quot;item.checked&quot;&gt; &lt;!--item.checked--&gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;checkbox-custom&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;label&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;item.text&quot;&gt;  &lt;!--绑定item.text--&gt;</span><br><span class="line">    &lt;a class&#x3D;&quot;delete-item&quot;&gt; &lt;!--删除图标--&gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;icon-trash&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;a&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">&#x2F;&#x2F; item是todo的子组件，他接受一个对象item，来进行处理</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123; &#x2F;&#x2F; 子组件显式的用 props 选项声明它期待获得的数据,这里申明 它想要一个叫做 &#39;item&#39;的数据。</span><br><span class="line">    item: &#123;</span><br><span class="line">      type: Object,</span><br><span class="line">      default: () &#x3D;&gt; &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          checked: false,</span><br><span class="line">          text: &#39;你好,世界&#39;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot;&gt;</span><br><span class="line">@import &#39;..&#x2F;common&#x2F;style&#x2F;list-items.less&#39;;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<h1 id="vuex改造项目并完成剩余交互"><a href="#vuex改造项目并完成剩余交互" class="headerlink" title="vuex改造项目并完成剩余交互"></a>vuex改造项目并完成剩余交互</h1><p>我们知道，在这个项目中的menu.vue与todo.vue不是父子组件的关系，而我们想让他们共享一组数据并且互相通信，除了，将数据放在他们共同的父组件中，然后再相互传递数据，我们还可以用vuex。Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。</p>
<h2 id="安装vuex"><a href="#安装vuex" class="headerlink" title="安装vuex"></a>安装vuex</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex --save</span><br></pre></td></tr></table></figure>
<h2 id="新建src-vuex-store-js"><a href="#新建src-vuex-store-js" class="headerlink" title="新建src/vuex/store.js"></a>新建src/vuex/store.js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actions <span class="keyword">from</span> <span class="string">'./actions.js'</span> <span class="comment">// gettes，actions，mutations，state在另外的文件定义，容易维护</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> getters <span class="keyword">from</span> <span class="string">'./getters'</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> mutations <span class="keyword">from</span> <span class="string">'./mutaitions'</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> state <span class="keyword">from</span> <span class="string">'./state'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建store实例并且导出</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  actions,</span><br><span class="line">  getters,</span><br><span class="line">  state,</span><br><span class="line">  mutations</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="新建src-vuex-state-js"><a href="#新建src-vuex-state-js" class="headerlink" title="新建src/vuex/state.js"></a>新建src/vuex/state.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建初始应用的全局状态变量</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> state = &#123;</span><br><span class="line">  todoList: [] <span class="comment">// 我们待办事项的列表数据</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="新建src-vuex-mutations-js"><a href="#新建src-vuex-mutations-js" class="headerlink" title="新建src/vuex/mutations.js"></a>新建src/vuex/mutations.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  EDITTODE (state, data) &#123; <span class="comment">// 定义mutation操作用于改变todoList的值</span></span><br><span class="line">    state.todoList = data</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="新建src-vuex-getters-js"><a href="#新建src-vuex-getters-js" class="headerlink" title="新建src/vuex/getters.js"></a>新建src/vuex/getters.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getTodoList = <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> state.todoList <span class="comment">// 派生状态下的todoList</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="新建src-vuex-actions-js"><a href="#新建src-vuex-actions-js" class="headerlink" title="新建src/vuex/actions.js"></a>新建src/vuex/actions.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;getTodoList&#125; <span class="keyword">from</span> <span class="string">'../api/api'</span> <span class="comment">// 引入接口函数getTodoList，用于请求最新的待办事项列表数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getTodo = (&#123;</span><br><span class="line">  commit</span><br><span class="line">&#125;) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 调用getTodo这个函数的时候，会调用ajax请求函数，函数返回值后，在调用store.js里定义的mutations里的</span></span><br><span class="line">    <span class="comment">// EDITTODE方法，并且把值传给EDITTODE</span></span><br><span class="line">    getTodoList().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      commit(<span class="string">'EDITTODE'</span>, res.data.todos) <span class="comment">// 将返会值的todos传给EDITTODE</span></span><br><span class="line">      resolve()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="在main-js中注入vuex的store配置"><a href="#在main-js中注入vuex的store配置" class="headerlink" title="在main.js中注入vuex的store配置"></a>在main.js中注入vuex的store配置</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The Vue build version to load with the `import` command</span></span><br><span class="line"><span class="comment">// (runtime-only or standalone) has been set in webpack.base.conf with an alias.</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span> <span class="comment">// 引入vue模块</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span> <span class="comment">// 引入vue组件</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span> <span class="comment">// 引入路由</span></span><br><span class="line"><span class="keyword">import</span> Mock <span class="keyword">from</span> <span class="string">'./mock'</span> <span class="comment">// 引入mock插件</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'../vuex/store'</span></span><br><span class="line">Mock.start() <span class="comment">// 生成模拟数据与ajax请求的接口</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123; <span class="comment">// 创建一个Vue的根实例</span></span><br><span class="line">  el: <span class="string">'#app'</span>, <span class="comment">// 挂载id，这个实例下的所有内容都会在index.html的一个id为app的div下显示</span></span><br><span class="line">  router, <span class="comment">// 注入路由配置</span></span><br><span class="line">  store, <span class="comment">// 注入store配置</span></span><br><span class="line">  components: &#123; App &#125;, <span class="comment">// 配置根模板</span></span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span> <span class="comment">// 注入组件</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/14/myVueProject1-todoList/" data-id="ckclm5gzr00010ww4hb860a1i" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2020/07/12/axios/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">axios</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/07/14/myVueProject1-todoList/">myVueProject1-todoList</a>
          </li>
        
          <li>
            <a href="/2020/07/12/axios/">axios</a>
          </li>
        
          <li>
            <a href="/2020/07/06/JS05-%E4%BD%9C%E7%94%A8%E5%9F%9F/">JS05-作用域</a>
          </li>
        
          <li>
            <a href="/2020/07/05/JS06-%E9%97%AD%E5%8C%85/">JS06-闭包</a>
          </li>
        
          <li>
            <a href="/2020/07/05/JS04-ES%E8%A7%84%E8%8C%83%E8%A7%A3%E8%AF%BBthis/">JS04-ES规范解读this</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>